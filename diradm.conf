# Begin /etc/diradm.conf
# vim: ts=4 sts=4 noexpandtab sw=4 ft=sh:

# Options for user account creation
# ---------------------------------
UIDNUMBERMIN="1001"
UIDNUMBERMAX="60000"
HOMEBASE="/home/users"
HOMEPERM="0711"
SKEL="/etc/skel"
DEFAULT_GIDNUMBER="100"
DEFAULT_LOGINSHELL="/bin/bash"
DEFAULT_SHADOWINACTIVE="7"
DEFAULT_SHADOWEXPIRE="-1"
SHADOWMIN="0"
SHADOWMAX="99999"
SHADOWWARNING="7"
SHADOWFLAG="0"

# Options for group account creation
# ----------------------------------
GIDNUMBERMIN="500"
GIDNUMBERMAX="60000"

# LDAP specific options
# ---------------------
# These two functions pull the relevant data
# from /etc/ldap.conf, /etc/openldap/ldap.conf and /etc/ldap.secret
function pullsetting() {
	# Parameter 1 is the file to pull from
	# Parameter 2 is the setting to get
	src="$1"
	setting="$2"
	grep -i "^${setting}" ${src} | tail -n1 | awk '{print $2}'
}

function grabconf() {
	# Parameter 1 is the file to pull from
	# Parameter 2 is the default if we can't get a value from /etc/ldap.conf or
	# /etc/openldap/ldap.conf
	setting="${1}"
	default="${2}"
	src=/etc/ldap.conf
	val="`pullsetting "${src}" "${setting}"`"
	if [ -z "${val}" ]; then
		src=/etc/openldap/ldap.conf
		val="`pullsetting "${src}" "${setting}"`"
	fi
	[ -z "${val}" ] && val="${default}"
	echo "${val}"
}

# LDAP specific options
# ---------------------
LDAPURI="`grabconf uri ldap://127.0.0.1/`"
BINDDN="`grabconf rootbinddn "cn=Manager,o=MyOrg"`"
# Be extremely careful with read rights
# of this file if you set this value!!!
# BINDPASS="secret"
BINDPASS="research"
USERBASE="`grabconf nss_base_passwd`"
GROUPBASE="`grabconf nss_base_group`"
BASEDN="dc=iat,dc=sfu,dc=ca"
SAMBAHOSTBASE="ou=Computers,${BASEDN}"

# SAMBA specific options
# ----------------------
SAMBADOMAINSID="S-1-5-21-3721693875-1545016702-1248474524"
SAMBAPATHPREPEND="\\\\\\YAMATO\\Users"
SAMBADRIVE="U:"
DEFAULT_SAMBAGID="512"
SAMBAHOSTRIDMIN="100000"
SAMBAHOSTRIDMAX="999999"

# Automount Info
# --------------
AUTOMOUNT_USERBASE="ou=home.users,ou=AutoFS,dc=iat,dc=sfu,dc=ca"
AUTOMOUNT_GROUPBASE="ou=home.projects,ou=AutoFS,dc=iat,dc=sfu,dc=ca"
AUTOMOUNT_OPTIONS="-rw,nosuid,nodev,nolock,rsize=32768,wsize=32768,soft,tcp,nfsvers=3,vers=3,retry=1,acregmin=15,acregmax=120,acdirmin=60,acdirmax=120"
AUTOMOUNT_USERDESC="users"
AUTOMOUNT_GROUPDESC="projects"
AUTOMOUNT_BASE="209.87.56.240:/export/users/0"

# End /etc/diradm.conf
